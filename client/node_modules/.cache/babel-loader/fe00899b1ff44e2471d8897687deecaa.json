{"ast":null,"code":"import _toConsumableArray from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/effeckt-/Desktop/labs/project-4/mernproject/client/src/components/pages/Spin.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport api from '../../api';\n\nvar Spin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Spin, _Component);\n\n  function Spin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Spin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Spin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      beers: [],\n      beer: {},\n      style: {\n        width: '50px',\n        transition: 'all 5s',\n        position: 'fixed',\n        top: '35vh',\n        left: '47vw'\n      },\n      winner: {},\n      users: [{\n        name: 'A'\n      }, {\n        name: 'B'\n      }, {\n        name: 'C'\n      }, {\n        name: 'D'\n      }, {\n        name: 'E'\n      }]\n    };\n\n    _this.spinTheBottle = function () {\n      var users = _this.state.users;\n      var index = Math.floor(Math.random() * users.length);\n      var winner = users[index];\n      console.log('our winner is ', winner);\n      var min = index * (360 / users.length);\n      var max = (index + 1) * (360 / users.length);\n      var rotate = getRandomArbitrary(min, max) + Math.floor(Math.random() * 20) * 360 - 360 / users.length * .5;\n\n      var style = _objectSpread({}, _this.state.style);\n\n      style['transform'] = \"rotate(\".concat(rotate, \"deg)\");\n\n      _this.setState({\n        style: style\n      });\n\n      setTimeout(function () {\n        _this.setWinner(winner);\n      }, 5000);\n    };\n\n    _this.setWinner = function (winner) {\n      _this.setState({\n        winner: winner\n      });\n    };\n\n    _this.drawUsers = function () {\n      var users = _toConsumableArray(_this.state.users);\n\n      users = arrangeElementsInCircle(users, window.innerHeight / 2, window.innerWidth / 2, 300);\n      console.log(users);\n      return users.map(function (eachUser) {\n        var style = {\n          position: 'fixed',\n          color: 'orange',\n          bottom: eachUser.x,\n          left: eachUser.y\n        };\n        return React.createElement(\"li\", {\n          style: style,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \" \", eachUser.username);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Spin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"https://api.punkapi.com/v2/beers?page=1&per_page=80\").then(function (response) {\n        console.log(response.data);\n        var randomBeer = response.data[Math.floor(Math.random() * response.data.length)];\n\n        _this2.setState({\n          beers: response.data,\n          beer: randomBeer\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n      api.getAllUsers().then(function (allUsers) {\n        return _this2.setState({\n          users: allUsers\n        });\n      }) //all users and return them \n      .catch(function (err) {\n        return console.error(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button spin\",\n        onClick: this.spinTheBottle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Spin the bottle!\"), React.createElement(\"div\", {\n        className: \"winner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"The winner is: \", this.state.winner.username)), React.createElement(\"div\", {\n        className: \"board\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: this.state.style,\n        src: this.state.beer.image_url,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"players\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, this.drawUsers()))));\n    }\n  }]);\n\n  return Spin;\n}(Component);\n\nexport { Spin as default };\n\nfunction getRandomArbitrary(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\nfunction arrangeElementsInCircle(elements, x, y, r) {\n  for (var i = 0; i < elements.length; i++) {\n    elements[i].scaleX = 1 / elements.length;\n    elements[i].scaleY = 1 / elements.length;\n    elements[i].x = x + r * Math.cos(2 * Math.PI * i / elements.length);\n    elements[i].y = y + r * Math.sin(2 * Math.PI * i / elements.length);\n  }\n\n  return elements;\n}","map":{"version":3,"sources":["/Users/effeckt-/Desktop/labs/project-4/mernproject/client/src/components/pages/Spin.jsx"],"names":["React","Component","axios","api","Spin","state","beers","beer","style","width","transition","position","top","left","winner","users","name","spinTheBottle","index","Math","floor","random","length","console","log","min","max","rotate","getRandomArbitrary","setState","setTimeout","setWinner","drawUsers","arrangeElementsInCircle","window","innerHeight","innerWidth","map","eachUser","color","bottom","x","y","username","get","then","response","data","randomBeer","catch","err","getAllUsers","allUsers","error","image_url","elements","r","i","scaleX","scaleY","cos","PI","sin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport api from '../../api'\nexport default class Spin extends Component {\n    state = {\n      beers : [],\n      beer: {},\n      style : {\n        width: '50px',\n        transition: 'all 5s',\n        position: 'fixed',\n        top: '35vh',\n        left: '47vw'\n      },\n     winner: {},\n     users : [{ name: 'A'}, {name: 'B'}, {name: 'C'}, {name: 'D'}, {name: 'E'}]\n    }\n\ncomponentDidMount() {\n    axios.get(`https://api.punkapi.com/v2/beers?page=1&per_page=80`)\n    .then((response) => {\n      console.log(response.data)\n      let randomBeer = response.data[Math.floor(Math.random()*response.data.length)]\n      this.setState({\n        beers: response.data,\n        beer: randomBeer\n      })\n    })\n    .catch(err => console.log(err))\n    api.getAllUsers()\n      .then(allUsers=>this.setState({users:allUsers})) //all users and return them \n      .catch(err=>console.error(err))\n}\n\nspinTheBottle = ()=>{\n    let users = this.state.users\n    let index = Math.floor(Math.random()*users.length)\n    let winner = users[index]\n\n    console.log('our winner is ', winner)\n\n    let min = index*(360/users.length)\n    let max = (index+1)*(360/users.length)\n    let rotate = getRandomArbitrary(min, max) + Math.floor(Math.random()*20)*360  - ((360/users.length)*.5)\n    let style = {...this.state.style}\n    \n    style['transform'] = `rotate(${rotate}deg)`\n    \n    this.setState({style})\n\n    setTimeout(()=>{\n      this.setWinner(winner)\n    }, 5000)\n}\n\nsetWinner = (winner) => {\n  this.setState({winner})\n}\n\ndrawUsers = () => {\n  let users = [...this.state.users]\n  users = arrangeElementsInCircle(users, window.innerHeight/2, window.innerWidth/2, 300)\n  console.log(users)\n\n  return users.map(eachUser => {\n    let style = {\n      position:'fixed', \n      color: 'orange', \n      bottom: eachUser.x,\n      left: eachUser.y,\n    }\n    return <li style={style}> { eachUser.username }</li>\n  })\n}\n\nrender() {\n  return (\n    <div>\n      <button className=\"button spin\" onClick={this.spinTheBottle}>Spin the bottle!</button>\n      <div className=\"winner\">\n\n      <h5><b>The winner is: {this.state.winner.username}</b></h5>\n      \n      <div className=\"board\">\n        <img style={this.state.style} src={this.state.beer.image_url} alt=\"\"/>\n        <ul className=\"players\">\n        {this.drawUsers()}\n        </ul> \n      </div>\n\n      </div>\n    </div>\n    )\n  }\n}\n\nfunction getRandomArbitrary(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\nfunction arrangeElementsInCircle (elements, x, y, r) {\n  for (var i = 0; i < elements.length; i++) {\n      elements[i].scaleX = 1 / elements.length\n      elements[i].scaleY = 1 / elements.length\n      elements[i].x = (x + r * Math.cos((2 * Math.PI) * i/elements.length))\n      elements[i].y = (y + r * Math.sin((2 * Math.PI) * i/elements.length))\n  }\n  return elements;\n}"]},"metadata":{},"sourceType":"module"}